/// <reference types="node" />
import dotenv from 'dotenv';
import { PrismaClient } from '../src/generated/prisma/client.js';

// Charger les variables d'environnement
dotenv.config();

const prisma = new PrismaClient();

// Liste exhaustive des villes du SÃ©nÃ©gal
const villesSenegal = [
  "Dakar",
  "GuÃ©diawaye",
  "Pikine",
  "Rufisque",
  "SÃ©bikhotane",
  "Bargny",
  "Diamniadio",
  "ThiÃ¨s",
  "Tivaouane",
  "Mbour",
  "Fissel",
  "Sindia",
  "Somone",
  "Saly Portudal",
  "Ngaparou",
  "Popenguine",
  "Ndayane",
  "Joal-Fadiouth",
  "NguÃ©khokh",
  "MÃ©ckhÃ©",
  "Khombole",
  "Pout",
  "Mont Rolland",
  "Sandiara",
  "Noto Gouye Diama",
  "Diass",
  "Sindone",
  "Kayar",
  "Mboro",
  "Lompoul",
  "KÃ©bÃ©mer",
  "Darou Mousty",
  "MÃ©ouane",
  "TaÃ¯ba Ndiouji",
  "Thilmakha",
  "Dahra",
  "LinguÃ¨re",
  "Yang-Yang",
  "Sagata",
  "Dodji",
  "VÃ©lingara",
  "RanÃ©rou",
  "Tatki",
  "Louga",
  "Ndiagne",
  "Potou",
  "Gandon",
  "Mpal",
  "Richard-Toll",
  "Dagana",
  "Ndioum",
  "Podor",
  "Wouro Sidy",
  "PÃ©tÃ©",
  "Gamadji SarÃ©",
  "BodÃ© Lao",
  "NdiawÃ¨ne",
  "Doumga Lao",
  "Dodel",
  "WalaldÃ©",
  "BokidiawÃ©",
  "Saint-Louis",
  "Gandon",
  "Mermoz-Sanglac",
  "Rao",
  "Guet Ndar",
  "Ndar Toute",
  "Sor",
  "Pikine Saint-Louis",
  "Diama",
  "Ross BÃ©thio",
  "Mbane",
  "Ronkh",
  "Djoudj",
  "Matam",
  "Kanel",
  "RanÃ©rou-Ferlo",
  "Ogo",
  "Thilogne",
  "Nabadji Civol",
  "BokidiawÃ©",
  "Waounde",
  "DembancanÃ©",
  "Hamady HounarÃ©",
  "Ogo",
  "Sinthiou BamambÃ©-Banadji",
  "Diourbel",
  "MbackÃ©",
  "Touba",
  "Bambey",
  "Ndame",
  "TaÃ¯f",
  "Dalla",
  "Dianatoul Diallo",
  "Darou Marnane",
  "Darou Nahim",
  "Gouye Mbinda",
  "KhalÃ©",
  "MbakÃ©",
  "Ndindy",
  "Ngoye",
  "Djilasse",
  "Kael",
  "Diohine",
  "Fissel",
  "Ndiob",
  "Djilas",
  "Tattaguine",
  "Fissel",
  "Sindia",
  "NguÃ©niÃ¨ne",
  "Sandiara",
  "Ndiaganiao",
  "Ndangane",
  "Djilasse",
  "Fatick",
  "Foundiougne",
  "Gossas",
  "Diofior",
  "Sokone",
  "Passy",
  "Nioro du Rip",
  "Keur Ayip",
  "Keur Samba Gueye",
  "Toubacouta",
  "Djilor",
  "Simal",
  "Niodor",
  "Dionewar",
  "Fimela",
  "Loul SessÃ¨ne",
  "Djirnda",
  "Bassoul",
  "Niodior",
  "Dionewar",
  "Kaolack",
  "GuinguinÃ©o",
  "Nioro du Rip",
  "Kaffrine",
  "Malem Niani",
  "Koungheul",
  "Kothiary",
  "MÃ©dinatoul Salam 2",
  "Sagna",
  "Saraya",
  "Ida Mouride",
  "Birane",
  "Darou Salam Typ",
  "Maka Yop",
  "MÃ©dinatoul Salam",
  "Kouthiaba Wolof",
  "Malem Niani",
  "Nganda",
  "Katakel",
  "Kahi",
  "Sagna",
  "Darou Coumba Sall",
  "Koumbal",
  "Dahra",
  "Dara Djolof",
  "LinguÃ¨re",
  "Yang-Yang",
  "Sagata",
  "Dodji",
  "VÃ©lingara",
  "RanÃ©rou",
  "Tatki",
  "Tambacounda",
  "Goudiry",
  "Bakel",
  "Kidira",
  "Moudou 1",
  "Diboli",
  "Selibaby",
  "BÃ©lÃ©",
  "Diawara",
  "Bala",
  "AÃ©rÃ© Lao",
  "BodÃ© Lao",
  "Diana Malari",
  "Galoya",
  "Kothiary",
  "Sinthiou Fissa",
  "Diankoudou",
  "KÃ©dougou",
  "Saraya",
  "Salemata",
  "Bandafassi",
  "Ibel",
  "Dakateli",
  "MÃ©dina BaffÃ©",
  "Ndinghary",
  "Ethouwar",
  "Fongolembi",
  "KÃ©rougouan",
  "KharakhÃ©na",
  "Mamakoudou",
  "NayÃ©ga",
  "Saraya",
  "Dimboli",
  "KÃ©dougou",
  "Bandafassi",
  "Dindefelo",
  "Ibel",
  "Tomboronkoto",
  "DindÃ©fÃ©lo",
  "SalÃ©mata",
  "Ã‰thiolo",
  "DakatÃ©li",
  "MÃ©dina BaffÃ©",
  "Ziguinchor",
  "Bignona",
  "Oussouye",
  "Boucoutir Diola",
  "Cap Skirring",
  "Kabrousse",
  "Kafountine",
  "DiembÃ©ring",
  "Oukout",
  "Mlomp",
  "Enampore",
  "SÃ©lÃ©ki",
  "Kagnout",
  "Nyassia",
  "MÃ©dina DjikoryÃ©",
  "AdÃ©ane",
  "Boutoupa-Camaracounda",
  "Loudia Ouoloff",
  "Djibidione",
  "Kalounayes",
  "Sindian",
  "Tendouck",
  "Tenghory",
  "Suelle",
  "Thionck-Essyl",
  "Tendouck",
  "Djibidione",
  "Kolibantang",
  "MÃ©dina",
  "Djibidione",
  "Bouro",
  "Baila",
  "Djimande",
  "Kagnout",
  "Niaguis",
  "Nyassia",
  "Samatite",
  "Senghor",
  "Simbandi Brassou",
  "Bagame",
  "BadiourÃ©",
  "Boutoupa",
  "Camaracounda",
  "Djibidione",
  "Kabiline",
  "Kagnout",
  "Kandialang",
  "Koungoulan",
  "MÃ©dina DjikoryÃ©",
  "Oukout",
  "Suelle",
  "Tendouck",
  "Tenghory",
  "Thionck-Essyl",
  "AdÃ©ane",
  "Afia",
  "Boutoupa-Camaracounda",
  "Djibidione",
  "Enampore",
  "Essyl",
  "Kagnout",
  "Kalounayes",
  "Kandialang",
  "Koungoulan",
  "Loudia Ouoloff",
  "Mlomp",
  "Niaguis",
  "Nyassia",
  "Oukout",
  "Oussouye",
  "SÃ©lÃ©ki",
  "Suelle",
  "Tendouck",
  "Tenghory",
  "Thionck-Essyl"
];

async function main() {
  console.log('ðŸŒ± DÃ©but du seeding...');

  // CrÃ©er le pays SÃ©nÃ©gal
  const senegal = await prisma.pays.upsert({
    where: { code: 'SN' },
    update: { nom: 'SÃ©nÃ©gal' },
    create: {
      nom: 'SÃ©nÃ©gal',
      code: 'SN',
    },
  });

  console.log(`âœ… Pays crÃ©Ã©: ${senegal.nom} (${senegal.id})`);

  // Supprimer les villes existantes du SÃ©nÃ©gal pour Ã©viter les doublons
  await prisma.ville.deleteMany({
    where: { paysId: senegal.id },
  });

  console.log('ðŸ—‘ï¸ Villes existantes supprimÃ©es');

  // CrÃ©er les villes du SÃ©nÃ©gal
  const villesData = [...new Set(villesSenegal)].map((nom) => ({
    nom,
    paysId: senegal.id,
  }));

  const result = await prisma.ville.createMany({
    data: villesData,
    skipDuplicates: true,
  });

  console.log(`âœ… ${result.count} villes crÃ©Ã©es pour le SÃ©nÃ©gal`);

  // Afficher quelques statistiques
  const totalVilles = await prisma.ville.count({
    where: { paysId: senegal.id },
  });

  console.log(`ðŸ“Š Total des villes du SÃ©nÃ©gal: ${totalVilles}`);
  console.log('ðŸŽ‰ Seeding terminÃ© avec succÃ¨s!');
}

main()
  .catch((e) => {
    console.error('âŒ Erreur lors du seeding:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
